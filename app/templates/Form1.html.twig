{#
 This is a template "page" for developing the form page.
 Try with the url path `/page/Form1.html.twig` (yes, with that suffix)

 TODO Remove this when JavaScript works.
#}
<!-- <html> -->
<form name="donForm" id="donForm" method="POST" action="#">

    <!-- steps-overview -->
    <div class="steps-overview container clearfix">
        <div class="ltcol">
            &nbsp;
        </div>

        <div class="ctcol">
            <div class="box rounded partial no-margin">

                <div class="box-header">
                    <ul class="step-list horizontal clearfix">
                        <li id="highlight-payment" class="first">Mein Betrag</li>
                        <li id="highlight-personalData">Meine Daten</li>
                        <li id="highlight-finished" class="last">Fertig!</li>
                    </ul>
                </div>

            </div>
        </div>

        <div class="rtcol">
            &nbsp;
        </div>
    </div>


    <!-- donation amount -->
    <section id="donation-amount" class="container clearfix">
        <div class="ltcol">
            &nbsp;
        </div>

        <div class="ctcol">
            <div class="box partial">
                <div class="box-section">
                    <div class="section-title clearfix">
                        <h2 class="f-left no-margin">Mein Spendenbetrag</h2>
                    </div>

                    <ul class="horizontal clearfix amount-list">
                        <li class="first">
                            <input type="radio" id="amount-1" name="betrag_auswahl" value="5,00" title="5&euro;" checked>
                            <label for="amount-1">5&euro;</label>
                        </li>

                        <li>
                            <input type="radio" id="amount-2" name="betrag_auswahl" value="15,00" title="15&euro;">
                            <label for="amount-2">15&euro;</label>
                        </li>

                        <li>
                            <input type="radio" id="amount-3" name="betrag_auswahl" value="25,00" title="25&euro;">
                            <label for="amount-3">25&euro;</label>
                        </li>

                        <li>
                            <input type="radio" id="amount-4" name="betrag_auswahl" value="50,00" title="50&euro;">
                            <label for="amount-4">50&euro;</label>
                        </li>

                        <li>
                            <input type="radio" id="amount-5" name="betrag_auswahl" value="75,00" title="75&euro;">
                            <label for="amount-5">75&euro;</label>
                        </li>

                        <li>
                            <input type="radio" id="amount-6" name="betrag_auswahl" value="100,00" title="100&euro;">
                            <label for="amount-6">100&euro;</label>
                        </li>

                        <li>
                            <input type="radio" id="amount-7" name="betrag_auswahl" value="250,00" title="250&euro;">
                            <label for="amount-7">250&euro;</label>
                        </li>

                        <li class="amount-custom last no-margin">
                            <div class="container" style="width: 100px;">
                                <input id="amount-8" name="betrag" type="text" value="" title="Betrag zwischen 1 und 99999,99 Euro; Komma als Dezimaltrenner" autocomplete="off" pattern="^[1-9]{1}\d{0,4}(?:,\d\d)?$">
                                <label class="right top" for="amount-8">&euro;</label>
                            </div>
                        </li>
                    </ul>

                </div>

            </div>
        </div>

        <div class="rtcol">
            <div class="icon-bar-chart _icon-list-item first">
                <p>
                    <a class="wlightbox inline" href="#" data-href="#wlightbox-wohin-geht-das-geld"><strong>Wohin geht meine Spende?</strong></a>
                </p>
            </div>

            <div class="icon-hand-right _icon-list-item">
                <p>
                    <a class="wlightbox inline" href="#" data-wlightbox-options="{&quot;left&quot;:&quot;300px&quot;}" data-href="#wlightbox-bitcoin"><strong>Bitcoins spenden</strong></a>
                </p>
            </div>

            <div class="icon-hand-right _icon-list-item">
                <p>
                    <a class="wlightbox inline" href="#" data-href="#wlightbox-steuerlich-absetzbar"><strong>Steuerlich absetzbar</strong></a>
                </p>
            </div>

            <div class="icon-coffee _icon-list-item last">
                <p>
                    <a class="wlightbox inline" href="#" data-href="#wlightbox-spendenkommentare" id="donationCommentLink"><strong>Spendenkommentare</strong></a>
                </p>
            </div>

        </div>
    </section>


    <!-- donation-periode -->
    <section id="donation-periode" class="container clearfix">
        <div class="ltcol">
            &nbsp;
        </div>

        <div class="ctcol">
            <div class="box partial">

                <div class="box-section">
                    <div class="section-title clearfix">
                        <h2>Mein Spendenrhythmus</h2>
                    </div>

                    <ul class="periode-list horizontal no-margin clearfix">
                        <li class="first">
                            <input type="radio" id="periode-1" name="intervalType" value="0" title="einmalig" checked>
                            <label for="periode-1">einmalig</label>
                        </li>

                        <li class="last">
                            <input type="radio" id="periode-2" name="intervalType" value="1" title="regelm&auml;&szlig;ig" class="slide-toggle" data-slide-rel="#donation-periode .slide.periode-2-list">
                            <label for="periode-2">regelm&auml;&szlig;ig</label>
                        </li>
                    </ul>

                    <div class="periode-2-list slide no-display no-opacity">
                        <hr />

                        <ul class="horizontal clearfix">
                            <li class="first">
                                <input type="radio" id="periode-2-1" name="recurring" class="interval-radio" value="1" title="monatlich" checked>
                                <label for="periode-2-1">monatlich</label>
                            </li>

                            <li>
                                <input type="radio" id="periode-2-2" name="recurring" class="interval-radio" value="3" title="quartalsweise">
                                <label for="periode-2-2">quartalsweise</label>
                            </li>

                            <li>
                                <input type="radio" id="periode-2-3" name="recurring" class="interval-radio" value="6" title="halbj&auml;hrlich">
                                <label for="periode-2-3">halbj&auml;hrlich</label>
                            </li>

                            <li class="last">
                                <input type="radio" id="periode-2-4" name="recurring" class="interval-radio" value="12" title="j&auml;hrlich">
                                <label for="periode-2-4">j&auml;hrlich</label>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>
        </div>

        <div class="rtcol">
            <div class="_icon-list-item first">
                <div id="logo-geotrust">
                   <!-- TODO </html>{{Web:Spendenseite-HK2013/rewrite/Seal_GeoTrust}}<html> -->
                </div>
                <div id="logo-owasp"><a title="OWASP Top 10 zertifiziert durch die plan42 GmbH" href="https://backend.wikimedia.de/wiki/images/7/7b/Wikimedia_OWASP_Top_10_%282013%29.pdf" target="_blank"><img height="54px" src="../skin/10h16/_assets/img/owasp.png" /></a></div>

                <div class="icon-lock _icon-list-item last">
                    <p>
                        <strong>SSL-Verschl&uuml;sselte Daten</strong>
                    </p>
                    <p>
                        Ihre Spende wird &uuml;ber eine sichere SSL-Verschl&uuml;sselung aufgenommen und liegt sp&auml;ter auf deutschen Servern.
                    </p>
                    <!--div class="logo-ssl-grey"></div-->
                </div>
            </div>
        </div>
    </section>


    <!-- donation payment -->
    <section id="donation-payment" class="container clearfix">
        <div class="ltcol">
            &nbsp;
        </div>

        <div class="ctcol">
            <div class="box rounded partial no-margin">

                <div class="box-section">
                    <div class="section-title clearfix">
                        <h2>Meine Zahlungsweise</h2>
                    </div>

                    <ul class="horizontal clearfix payment-type-list">
                        <li class="first">
                            <input type="radio" id="payment-type-1" name="zahlweise" value="UEB" title="&Uuml;berweisung" required="required">
                            <label for="payment-type-1">&Uuml;berweisung</label>
                        </li>

                        <li>
                            <input type="radio" id="payment-type-2" name="zahlweise" value="MCP" title="Kreditkarte" required="required">
                            <label for="payment-type-2">Kreditkarte</label>
                        </li>

                        <li>
                            <input type="radio" id="payment-type-3" name="zahlweise" value="BEZ" title="Lastschrift" required="required" checked="checked">
                            <label for="payment-type-3">Lastschrift</label>
                        </li>

                        <li class="last">
                            <input type="radio" id="payment-type-4" name="zahlweise" value="PPL" title="PayPal" required="required">
                            <label for="payment-type-4">Paypal</label>
                        </li>
                    </ul>
                </div>

            </div>
        </div>

    <!-- TODO </html>{{Web:Spendenseite-HK2013/rewrite/Datenschutzlinks}}<html> -->
    </section>


    <!-- donation submit -->
    <section id="donation-submit1" class="container clearfix">
        <div class="ltcol">
            &nbsp;
        </div>

        <div class="ctcol">
            <div class="box rounded partial">

                <div class="box-footer border-top clearfix">
                    <span class="label f-left">Setzen Sie die Spende mit Angabe<br>Ihrer persönlichen Daten fort</span>

                    <button id="continueFormSubmit" type="button" class="f-right">Spende fortsetzen <span class="icon-arrow-right"></span></button>
                </div>

            </div>
        </div>

        <div class="rtcol">
        </div>
    </section>

    <!-- personal data -->
    <section id="personal-data" class="container clearfix">
        <div class="ltcol">
            &nbsp;
        </div>

        <div class="ctcol">
            <div class="box partial">

                <div class="box-section">
                    <div class="section-title clearfix">
                        <h2>Pers&ouml;nliche Daten</h2>
                    </div>

                    <div class="container">
                        <ul class="horizontal clearfix">
                            <li class="first">
                                <input type="radio" id="address-type-1" name="adresstyp" value="person" title="privat" class="slide-toggle" data-slide-rel="#personal-data .slide-1" {% if adresstyp == 'person' or not adresstyp %}checked{% endif %}>
                                <label for="address-type-1">Privatperson</label>
                            </li>

                            <li>
                                <input type="radio" id="address-type-2" name="adresstyp" value="firma" title="gesch&auml;ftlich" class="slide-toggle" data-slide-rel="#personal-data .slide-2" {% if adresstyp == 'firma' %}checked{% endif %}>
                                <label for="address-type-2">Firma</label>
                            </li>

                            <li class="last">
                                <input type="radio" id="address-type-3" name="adresstyp" value="anonym" title="anonym" class="slide-toggle slide-toggle-invert" data-slide-rel="#personal-data .slide-3" {% if adresstyp == 'anonym' %}checked{% endif %}>
                                <label for="address-type-3">anonym</label>
                            </li>
                        </ul>

                        <a href="#" id="tooltip-icon-addresstype" class="right top help tooltip icon-only tooltip-track" data-title="Adresstyp" title="Bitte beachten Sie, dass wir für eine spätere Zuordnung der Spende Ihren Namen und die Zahlungsinformationen vom Dienstleister erhalten."><span class="icon-question-sign"></span></a>
                    </div>

                    <div class="slide-3">

                        <hr/>

                        <div class="slide-1">

                            <div class="input-container">
                                <ul class="horizontal clearfix salutation">
                                    <li class="first">
                                        <input type="radio" id="salutation-1" name="anrede" value="Frau" title="Frau" class="required" {% if anrede == 'Frau' or not anrede %}checked="checked"{% endif %}>
                                        <label for="salutation-1">Frau</label>
                                    </li>

                                    <li class="last">
                                        <input type="radio" id="salutation-2" name="anrede" value="Herr" title="Herr" {% if anrede == 'Herr' %}checked="checked"{% endif %}>
                                        <label for="salutation-2">Herr</label>
                                    </li>
                                </ul>

                                <select id="personal-title" name="titel">
                                    <option value="" data-behavior="placeholder">Kein Titel</option>
                                    <option value="Dr." {% if titel == 'Dr.' %}selected{% endif %}>Dr.</option>
                                    <option value="Prof." {% if titel == 'Prof.' %}selected{% endif %}>Prof.</option>
                                    <option value="Prof. Dr." {% if titel == 'Prof. Dr.' %}selected{% endif %}>Prof. Dr.</option>
                                </select>
                            </div>

                            <div class="input-container">
                                <label for="first-name">Name</label>
                                <input id="first-name" name="vorname" type="text" value="{$ vorname $}" pattern="^((?![M|m]ustermann).)*$" title="Groß- und Kleinbuchstaben, Bindestriche und Leerzeichen" placeholder="Vorname" required="required" class="required">
                                <span class="validation icon-placeholder"></span>
                                <input id="last-name" name="nachname" type="text" value="{$ nachname $}" pattern="^((?![M|m]ustermann).)*$" title="Groß- und Kleinbuchstaben, Bindestriche, Leerzeichen und Punkte" placeholder="Nachname" required="required" class="required">
                                <span class="validation icon-placeholder"></span>
                            </div>
                        </div>

                        <div class="slide-2">

                            <div class="input-container">
                                <label for="company-name">Firma</label>
                                <input id="company-name" name="firma" type="text" value="{$ firma $}" placeholder="Firma" required="required" class="required">
                                <span class="validation icon-placeholder"></span>
                            </div>
                        </div>


                        <div class="input-container">
                            <label for="street">Stra&szlig;e</label>
                            <input id="street" name="strasse" type="text" value="{$ strasse $}" pattern="^((?![M|m]uster).)*$" placeholder="z.B. Musterstra&szlig;e 123" required="required" class="required">
                            <span class="validation icon-placeholder"></span>
                        </div>

                        <div class="input-container">
                            <label for="post-code">PLZ &amp; Ort</label>
                            <input id="post-code" name="plz" type="text" value="{$ plz $}"  placeholder="z.B. 10117" title="Fünfstellige Postleitzahl" required="required" class="required" pattern="[0-9]{5}">
                            <span class="validation icon-placeholder"></span>
                            <input id="city" name="ort" type="text" value="{$ ort $}" pattern="^((?![M|m]uster).)*$" placeholder="z.B. Berlin" required="required" class="required">
                            <span class="validation icon-placeholder"></span>
                        </div>

                        <div class="input-container">
                            <label for="country">Land</label>
                            <select id="country" name="country" title="Land">
                                <option value="DE" {% if country == 'DE' %}selected{% endif %}>Deutschland</option>
                                <option value="AT" {% if country == 'AT' %}selected{% endif %}>Österreich</option>
                                <option value="CH" {% if country == 'CH' %}selected{% endif %}>Schweiz</option>
                                <option value="BE" {% if country == 'BE' %}selected{% endif %}>Belgien</option>
                                <option value="IT" {% if country == 'IT' %}selected{% endif %}>Italien</option>
                                <option value="LI" {% if country == 'LI' %}selected{% endif %}>Liechtenstein</option>
                                <option value="LU" {% if country == 'LU' %}selected{% endif %}>Luxemburg</option>
                            </select>
                        </div>

                        <div class="input-container">
                            <label for="email">E-Mail</label>
                            <input id="email" name="email" type="text" value="{$ email $}" placeholder="z.B. name@domain.de" required="required" class="required">
                            <span class="validation icon-placeholder"></span>
                        </div>

                        <!-- Informationsmaterial -->
                        <div class="container" style="margin-top: 40px; font-size:90%">
                            <input type="checkbox" id="send-information" name="info" value="1" title="Bitte senden Sie mir Informationsmaterial.">
                            <label for="send-information" style="margin-right: 30px; width: auto;">Ja, ich bin damit einverstanden, dass Wikimedia mich per E-Mail kontaktiert, wenn Wikipedia meine Unterstützung benötigt.</label>
                            <a href="#" class="right top help tooltip icon-only tooltip-track" data-title="Infomaterial_F2_Intrvar" title="Einmal im Jahr bitten wir die Leserinnen und Leser Wikipedias um Unterstützung. Wir würden uns freuen, wenn wir in Zukunft auf Sie zählen können, wenn es um die Verbreitung Freien Wissens geht."><span class="icon-question-sign"></span></a>
                        </div>
                        <!-- Informationsmaterial -->

                    </div>

                </div>
            </div>
        </div>

        <div class="rtcol">
            <div class="icon-shield _icon-list-item first last">
                <p>
                    <strong>Ihre Daten sind sicher</strong>
                </p>
                <p>
                    Wir f&uuml;hlen uns dem  Datenschutz verpflichtet. Unsere Bestimmungen dazu k&ouml;nnen Sie <a href="Datenschutz">hier</a> einsehen.
                </p>
            </div>
            <div class="icon-envelope-alt _icon-list-item first last slide-3 opened" style="position: absolute; bottom: -9px; width: 180px;/* IE8 fix */">
                <p>
                    <strong>Einfache Abmeldung</strong>
                </p>
                <p>
                    Die Einwilligung können Sie jederzeit per E-Mail an <a href="mailto:spenden@wikimedia.de">spenden@wikimedia.de</a><br>mit Wirkung für die Zukunft widerrufen.
                </p>
            </div>
        </div>
    </section>


    <section id="donation-submit2" class="container clearfix" style="display:none">
        <div class="ltcol">
            &nbsp;
        </div>

        <div class="ctcol">
            <div class="box rounded partial">

                <div class="box-footer border-top clearfix">
                    <span class="label f-left">Schließen Sie die Spende ab</span>

                    <button id="continueFormSubmit" type="button" class="f-right">Spende abschließen <span class="icon-arrow-right"></span></button>
                </div>

            </div>
        </div>

        <div class="rtcol">
        </div>
    </section>

    <input type="hidden" id="interval-hidden" name="periode">
    <input type="hidden" name="form" value="10h16_Form2_Ticker_Intrvar">
</form>

<script>
    // Initialize the form
    $(function(){

        var formVisibility = WMDEFR.View.createFormPageVisibilityHandler( {
                    payment: $( "#donation-periode,#donation-amount,#donation-payment,#donation-submit1" ),
                    personalData: $( "#personal-data,#donation-submit2" )
            } ),
            formHighlight = WMDEFR.View.createFormPageHighlightHandler( $( 'ul.step-list li' ) ),
            buttonsEnable = WMDEFR.View.createEnabledWhenValidHandler( $('#donation-submit1 button,#donation-submit2 button') ),
            amountValidator = WMDEFR.FormValidation.createAmountValidator(
                    WMDEFR.FormData.createMultipleValueAccessor(
                            WMDEFR.FormData.createTextValueAccessor( $( '#betrag' ) ),
                            WMDEFR.FormData.createRadioValueAccessor( $( 'input[name=betrag_auswahl]' ) )
                    ),
                    WMDEFR.FormData.createRadioValueAccessor( $( 'input[name=zahlweise]' ) ),
                    '{$ basepath $}/validate-amount'
            ),
            // TODO remove this when amount validation on the server side is merged
            fakeValidator = {
                validate: function() {
                    return new Promise( function ( resolve ) {
                        resolve( { status: 'OK' } );
                    } );
                }
            };

        // Glue function for event handling
        // TODO maybe make this an independent bindings layer?
        WMDEFR.FormState.subscribe( function() {
            var state = WMDEFR.FormState.getState();
            // console.log( state );
            formVisibility.update( state.formPagination );
            formHighlight.update( state.formPagination );
            buttonsEnable.update( state.validity );
        } );

        // Initialize pages
        WMDEFR.FormState.dispatch( WMDEFR.Actions.addPage( 'payment' ) );
        WMDEFR.FormState.dispatch( WMDEFR.Actions.addPage( 'personalData' ) );

        // Add view events
        $( '.amount-list input, .payment-type-list input' ).change( function( evt ) {
            fakeValidator.validate().then( function( validationResult ) {
                WMDEFR.FormState.dispatch( WMDEFR.Actions.storeValidationResult( validationResult.status === 'OK' ) );
            } );
        } );

        $('#donation-submit1 button' ).click( function() {
            WMDEFR.FormState.dispatch( WMDEFR.Actions.nextPage() );
        } );
    } );
</script>

<!-- TODO
<div class="wlightbox-contents">
    <div id="wlightbox-wohin-geht-das-geld">
</html>{{Web:Spendenseite-HK2013/rewrite/10h16_Lightbox_Wohin_geht_das_Geld}}<html>
</div>
<div id="wlightbox-steuerlich-absetzbar">
</html>{{Web:Spendenseite-HK2013/rewrite/10h16_Lightbox_Steuer}}<html>
</div>
<div id="wlightbox-bitcoin">
</html>{{Web:Spendenseite-HK2013/rewrite/10h16_Lightbox_BitCoin}}<html>
</div>
<div id="wlightbox-spendenkommentare"></html>{{Web:Spendenseite-HK2013/rewrite/10h16_Lightbox_Spendenkommentare}}<html></div>

</div>
</html>{{Web:Spendenseite-HK2013/rewrite/Bank Detail Banner}}<html>
</html>
-->